<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>邂逅鸿蒙 | Mr.储</title><meta name="keywords" content="加油站"><meta name="author" content="Mr.储"><meta name="copyright" content="Mr.储"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="邂逅鸿蒙 DevEco-Studio快捷键 alt + shift：多选 ctrl + shift + -&gt;：同时移动 ctrl + alt + L：格式化代码 shift + Enter：快速跳转到下一行 ctrl + Y：删除当前行  1、自定义组件自定义组件的基本结构 struct：自定义组件基于struct实现，struct + 自定义组件名 + &amp;#123;...&amp;#125;的组合">
<meta property="og:type" content="article">
<meta property="og:title" content="邂逅鸿蒙">
<meta property="og:url" content="https://old-gang.github.io/post/45acc878.html">
<meta property="og:site_name" content="Mr.储">
<meta property="og:description" content="邂逅鸿蒙 DevEco-Studio快捷键 alt + shift：多选 ctrl + shift + -&gt;：同时移动 ctrl + alt + L：格式化代码 shift + Enter：快速跳转到下一行 ctrl + Y：删除当前行  1、自定义组件自定义组件的基本结构 struct：自定义组件基于struct实现，struct + 自定义组件名 + &amp;#123;...&amp;#125;的组合">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-01-05T09:52:36.000Z">
<meta property="article:modified_time" content="2024-02-06T06:27:01.042Z">
<meta property="article:author" content="Mr.储">
<meta property="article:tag" content="加油站">
<meta name="twitter:card" content="summary"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://old-gang.github.io/post/45acc878"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '邂逅鸿蒙',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-06 14:27:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Mr.储</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">邂逅鸿蒙</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon fas fa-history"></i><span class="post-meta-label">更新于</span><time datetime="2024-02-06T06:27:01.042Z" title="更新于 2024-02-06 14:27:01">2024-02-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="邂逅鸿蒙"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="邂逅鸿蒙"><a href="#邂逅鸿蒙" class="headerlink" title="邂逅鸿蒙"></a>邂逅鸿蒙</h1><blockquote>
<p><strong>DevEco-Studio快捷键</strong></p>
<p><code>alt + shift</code>：多选</p>
<p><code>ctrl + shift + -&gt;</code>：同时移动</p>
<p><code>ctrl + alt + L</code>：格式化代码</p>
<p><code>shift + Enter</code>：快速跳转到下一行</p>
<p><code>ctrl + Y</code>：删除当前行</p>
</blockquote>
<h2 id="1、自定义组件"><a href="#1、自定义组件" class="headerlink" title="1、自定义组件"></a>1、自定义组件</h2><h3 id="自定义组件的基本结构"><a href="#自定义组件的基本结构" class="headerlink" title="自定义组件的基本结构"></a>自定义组件的基本结构</h3><ul>
<li>struct：自定义组件基于struct实现，<code>struct </code>+ <code>自定义</code>组件名 + <code>&#123;...&#125;</code>的组合构成自定义组件，不能有继承关系。对于struct的实例化，可以省略new。</li>
</ul>
<blockquote>
<p>说明：自定义组件名、类名、函数名不能和系统组件名相同。</p>
</blockquote>
<ul>
<li>@Component：@Component装饰器仅能装饰struct关键字声明的数据结构。struct被@Component装饰后具备组件化的能力，需要实现build方法描述UI，一个struct只能被一个@Component装饰。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>build()函数：build()函数用于定义自定义组件的声明式UI描述，自定义组件必须定义build()函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Entry：@Entry装饰的自定义组件将作为UI页面的入口。在单个UI页面中，最多可以使用@Entry装饰一个自定义组件。@Entry可以接受一个可选的<a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-localstorage-0000001524537149-V3">LocalStorage</a>的参数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="build-函数"><a href="#build-函数" class="headerlink" title="build()函数"></a>build()函数</h3><p>所有声明在<code>build()</code>函数的语言，我们统称为UI描述，UI描述需要遵循以下规则：</p>
<ul>
<li><p>@Entry装饰的自定义组件，其&#x3D;&#x3D;build()函数下的根节点唯一且必要，且必须为容器组件，其中ForEach禁止作为根节点。&#x3D;&#x3D;</p>
<p> @Component装饰的自定义组件，&#x3D;&#x3D;其build()函数下的根节点唯一且必要，可以为非容器组件，其中ForEach禁止作为根节点。&#x3D;&#x3D;</p>
</li>
<li><p>不允许声明本地变量，反例如下。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 反例：不允许声明本地变量</span></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">a</span>: number = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不允许在UI描述里直接使用console.info，但允许在方法或者函数里使用，反例如下。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 反例：不允许console.info</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;print debug log&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不允许创建本地的作用域，反例如下。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 反例：不允许本地作用域</span></span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不允许调用没有用@Builder装饰的方法，允许系统组件的参数是TS方法的返回值。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">ParentComponent</span> &#123;</span><br><span class="line">  <span class="title function_">doSomeCalculations</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">calcTextValue</span>(): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @<span class="title class_">Builder</span> <span class="title function_">doSomeRender</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="title class_">Hello</span> <span class="title class_">World</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// 反例：不能调用没有用@Builder装饰的方法</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">doSomeCalculations</span>();</span><br><span class="line">      <span class="comment">// 正例：可以调用</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">doSomeRender</span>();</span><br><span class="line">      <span class="comment">// 正例：参数可以为调用TS方法的返回值</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="title function_">calcTextValue</span>())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x3D;&#x3D;不允许switch语法，如果需要使用条件判断，请使用if。&#x3D;&#x3D;反例如下。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="comment">// 反例：不允许使用switch语法</span></span><br><span class="line">    <span class="keyword">switch</span> (expression) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="title class_">Image</span>(<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不允许使用表达式，反例如下。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="comment">// 反例：不允许使用表达式</span></span><br><span class="line">    (<span class="variable language_">this</span>.<span class="property">aVar</span> &gt; <span class="number">10</span>) ? <span class="title class_">Text</span>(<span class="string">&#x27;...&#x27;</span>) : <span class="title class_">Image</span>(<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Builder装饰器：自定义组件构建函数"><a href="#Builder装饰器：自定义组件构建函数" class="headerlink" title="@Builder装饰器：自定义组件构建函数"></a>@Builder装饰器：自定义组件构建函数</h2><h3 id="自定义组件内自定义构建函数"><a href="#自定义组件内自定义构建函数" class="headerlink" title="自定义组件内自定义构建函数"></a>自定义组件内自定义构建函数</h3><p>定义的语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Builder</span> <span class="title class_">MyBuilderFunction</span>(&#123; ... &#125;)</span><br></pre></td></tr></table></figure>

<p>使用方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title class_">MyBuilderFunction</span>(&#123; ... &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>允许在自定义组件内定义一个或多个<code>@Builder</code>方法，该方法被认为是该组件的私有、特殊类型的成员函数。</li>
<li>自定义构建函数可以在所属组件的<code>build方</code>法和其他自定义构建函数中调用，但不允许在组件外调用。</li>
<li>在自定义函数体中，this指代当前所属组件，组件的状态变量可以在自定义构建函数内访问。建议通过this访问自定义组件的状态变量而不是参数传递。</li>
</ul>
<h3 id="全局自定义构建函数"><a href="#全局自定义构建函数" class="headerlink" title="全局自定义构建函数"></a>全局自定义构建函数</h3><p>定义的语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Builder</span> <span class="keyword">function</span> <span class="title function_">MyGlobalBuilderFunction</span>(<span class="params">&#123; ... &#125;</span>)</span><br></pre></td></tr></table></figure>

<p>使用方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyGlobalBuilderFunction</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>全局的自定义构建函数可以被整个应用获取，不允许使用<code>this</code>和<code>bind</code>方法。</li>
<li>如果不涉及组件状态变化，建议使用全局的自定义构建方法。</li>
</ul>
<h2 id="Styles装饰器：定义组件重用样式"><a href="#Styles装饰器：定义组件重用样式" class="headerlink" title="@Styles装饰器：定义组件重用样式"></a>@Styles装饰器：定义组件重用样式</h2><p>@Styles装饰器可以将多条样式设置提炼成一个方法，直接在组件声明的位置调用。通过@Styles装饰器可以快速定义并复用自定义样式。用于快速定义并复用自定义样式。</p>
<h4 id="装饰器使用说明"><a href="#装饰器使用说明" class="headerlink" title="装饰器使用说明"></a>装饰器使用说明</h4><ul>
<li>当前@Styles仅支持通用属性和通用事件。</li>
<li><font color="red">@Styles方法不支持参数</font>，反例如下。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 反例： @Styles不支持参数</span></span><br><span class="line">@<span class="title class_">Styles</span> <span class="keyword">function</span> <span class="title function_">globalFancy</span> (<span class="attr">value</span>: number) &#123;</span><br><span class="line">  .<span class="title function_">width</span>(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Styles可以定义在组件内或全局，在全局定义时需在方法名前面添加function关键字，组件内定义时则不需要添加function关键字。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局</span></span><br><span class="line">@<span class="title class_">Styles</span> <span class="keyword">function</span> <span class="title function_">functionName</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件内</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">FancyUse</span> &#123;</span><br><span class="line">  @<span class="title class_">Styles</span> <span class="title function_">fancy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义在组件内的@Styles可以通过this访问组件的常量和状态变量，并可以在@Styles里通过事件来改变状态变量的值，示例如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">FancyUse</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">heightValue</span>: number = <span class="number">100</span></span><br><span class="line">  @<span class="title class_">Styles</span> <span class="title function_">fancy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">heightValue</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">heightValue</span> = <span class="number">200</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组件内@Styles的优先级高于全局@Styles。</li>
<li>框架优先找当前组件内的@Styles，如果找不到，则会全局查找。</li>
</ul>
<h2 id="Extend装饰器：定义扩展组件样式"><a href="#Extend装饰器：定义扩展组件样式" class="headerlink" title="@Extend装饰器：定义扩展组件样式"></a>@Extend装饰器：定义扩展组件样式</h2><p>在@Styles的基础上，我们提供了@Extend，用于扩展原生组件样式。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">UIComponentName</span>) <span class="keyword">function</span> functionName &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用规则"><a href="#使用规则" class="headerlink" title="使用规则"></a>使用规则</h3><ul>
<li>和@Styles不同，<font color="red">@Extend仅支持定义在全局，不支持在组件内部定义。</font></li>
<li>和@Styles不同，@Extend支持封装指定的组件的私有属性和私有事件和预定义相同组件的@Extend的方法。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @Extend(Text)可以支持Text的私有属性fontColor</span></span><br><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">fancy</span> () &#123;</span><br><span class="line">  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// superFancyText可以调用预定义的fancy</span></span><br><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">superFancyText</span>(<span class="params">size:number</span>) &#123;</span><br><span class="line">    .<span class="title function_">fontSize</span>(size)</span><br><span class="line">    .<span class="title function_">fancy</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>和@Styles不同，<font color="red">@Extend装饰的方法支持参数</font>，开发者可以在调用时传递参数，调用遵循TS方法传值调用。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">fancy</span> (<span class="attr">fontSize</span>: number) &#123;</span><br><span class="line">  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">  .<span class="title function_">fontSize</span>(fontSize)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">FancyUse</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Fancy&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fancy</span>(<span class="number">16</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Fancy&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fancy</span>(<span class="number">24</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Extend装饰的方法的<font color="red">参数可以为function，作为Event事件的句柄。</font></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">makeMeClick</span>(<span class="params">onClick: () =&gt; <span class="keyword">void</span></span>) &#123;</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">  .<span class="title function_">onClick</span>(onClick)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">FancyUse</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">label</span>: string = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onClickHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">label</span> = <span class="string">&#x27;Hello ArkUI&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>($&#123;<span class="variable language_">this</span>.<span class="property">label</span>&#125;)</span><br><span class="line">        .<span class="title function_">makeMeClick</span>(<span class="variable language_">this</span>.<span class="property">onClickHandler</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Extend的参数可以为状态变量，当状态变量改变时，UI可以正常的被刷新渲染。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">fancy</span> (<span class="attr">fontSize</span>: number) &#123;</span><br><span class="line">  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">  .<span class="title function_">fontSize</span>(fontSize)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">FancyUse</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">fontSizeValue</span>: number = <span class="number">20</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Fancy&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fancy</span>(<span class="variable language_">this</span>.<span class="property">fontSizeValue</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">fontSizeValue</span> = <span class="number">30</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="stateStyles：多态样式"><a href="#stateStyles：多态样式" class="headerlink" title="stateStyles：多态样式"></a>stateStyles：多态样式</h2><p>@Styles和@Extend仅仅应用于静态页面的样式复用，stateStyles可以依据组件的内部状态的不同，快速设置不同样式。这就是我们本章要介绍的内容stateStyles（又称为：多态样式）。</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>stateStyles是属性方法，可以根据UI内部状态来设置样式，类似于css伪类，但语法不同。ArkUI提供以下四种状态：</p>
<ul>
<li>focused：获焦态。</li>
<li>normal：正常态。</li>
<li>pressed：按压态。</li>
<li>disabled：不可用态。</li>
</ul>
<blockquote>
<p>按钮、输入框放在第一个时，会默认获取焦点</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * stateStyles()其实是一个属性方法。属性为一个对象（多个状态为键，状态样式为对应的值）</span></span><br><span class="line"><span class="comment"> * 第一个元素默认获焦</span></span><br><span class="line"><span class="comment"> * - focused：获焦态。</span></span><br><span class="line"><span class="comment">  - normal：正常态。</span></span><br><span class="line"><span class="comment">  - pressed：按压态。</span></span><br><span class="line"><span class="comment">  - disabled：不可用态。</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">StateStylesFun</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">message</span>: string = <span class="string">&#x27;stateStyles属性方法&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="comment">// Button(&#x27;哥们，我先来的。焦点在我这呢。&#x27;)</span></span><br><span class="line">        <span class="comment">// 临时加个输入框，获焦效果更明显</span></span><br><span class="line">        <span class="title class_">TextInput</span>()</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Orange</span>, <span class="attr">width</span>: <span class="number">2</span> &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">stateStyles</span>(&#123;</span><br><span class="line">            <span class="attr">focused</span>: &#123;</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">normal</span>: &#123;</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">pressed</span>: &#123;</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h2><ul>
<li>@State：@State装饰的变量拥有其所属组件的状态，可以作为其子组件单向和双向同步的数据源。当其数值改变时，会引起相关组件的渲染刷新。</li>
<li>@Prop：@Prop装饰的变量可以和父组件建立单向同步关系，@Prop装饰的变量是可变的，但修改不会同步回父组件。</li>
<li>@Link：@Link装饰的变量和父组件构建双向同步关系的状态变量，父组件会接受来自@Link装饰的变量的修改的同步，父组件的更新也会同步给@Link装饰的变量。</li>
<li>@Provide&#x2F;@Consume：@Provide&#x2F;@Consume装饰的变量用于跨组件层级（多层组件）同步状态变量，可以不需要通过参数命名机制传递，通过alias（别名）或者属性名绑定。</li>
<li>@Observed：@Observed装饰class，需要观察多层嵌套场景的class需要被@Observed装饰。单独使用@Observed没有任何作用，需要和@ObjectLink、@Prop连用。</li>
<li>@ObjectLink：@ObjectLink装饰的变量接收@Observed装饰的class的实例，应用于观察多层嵌套场景，和父组件的数据源构建双向同步。</li>
</ul>
<h3 id="State—–-gt-Prop-和-State-lt-—–-gt-Link"><a href="#State—–-gt-Prop-和-State-lt-—–-gt-Link" class="headerlink" title="@State—–&gt;@Prop 和 @State  &lt;—–&gt; @Link"></a>@State—–&gt;@Prop 和 @State  &lt;—–&gt; @Link</h3><ul>
<li>驱动build()更新</li>
<li>@State  —&gt; @Prop (<code>this.</code>进行传参)，单向</li>
<li>@State  &lt;–&gt; @Link(传参使用$)，<font color="red">双向</font></li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StateMgn</span> &#123;</span><br><span class="line">  <span class="comment">// @State 必须初始化</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;小储&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">name</span>).<span class="title class_">StateMgn</span>_TextSty()</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;点我&#x27;</span>)</span><br><span class="line">          .<span class="title class_">StateMgn</span>_BtnSty(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="variable language_">this</span>.<span class="property">name</span> === <span class="string">&#x27;小储&#x27;</span> ? <span class="string">&#x27;大储&#x27;</span> : <span class="string">&#x27;小储&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Divider</span>()</span><br><span class="line"></span><br><span class="line">      <span class="comment">//   prop组件</span></span><br><span class="line">        <span class="title class_">StateMgn</span>_prop(&#123;<span class="attr">content</span>:<span class="variable language_">this</span>.<span class="property">name</span>&#125;)</span><br><span class="line">      <span class="comment">//   link</span></span><br><span class="line">        <span class="title class_">Divider</span>()</span><br><span class="line">        <span class="title class_">StateMgn</span>_link(&#123;<span class="attr">content_link</span>:$name&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// prop单向数据流</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StateMgn</span>_prop &#123;</span><br><span class="line"> <span class="comment">//  prop修饰的数据，不能初始化</span></span><br><span class="line"> <span class="meta">@Prop</span> <span class="attr">content</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">content</span>).<span class="title class_">StateMgn</span>_TextSty()</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;修改prop&#x27;</span>).<span class="title class_">StateMgn</span>_BtnSty(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">content</span> = <span class="string">&#x27;HarmonyOS 4.0&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// link双向数据流</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StateMgn</span>_link &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">content_link</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>()&#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">content_link</span>).<span class="title class_">StateMgn</span>_TextSty()</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;修改：&#x27;</span> + <span class="string">&#x27;link&#x27;</span>).<span class="title class_">StateMgn</span>_BtnSty(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">content_link</span> = <span class="string">&#x27;arkTs&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//封装公共样式</span></span><br><span class="line"><span class="meta">@Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">StateMgn_TextSty</span>(<span class="params"></span>) &#123;</span><br><span class="line">  .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">  .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">  .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Extend</span>(<span class="title class_">Button</span>) <span class="keyword">function</span> <span class="title function_">StateMgn_BtnSty</span>(<span class="params">click:<span class="built_in">Function</span></span>)&#123;</span><br><span class="line">  .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">  .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">click</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Provide装饰器和-Consume装饰器：与后代组件双向同步"><a href="#Provide装饰器和-Consume装饰器：与后代组件双向同步" class="headerlink" title="@Provide装饰器和@Consume装饰器：与后代组件双向同步"></a>@Provide装饰器和@Consume装饰器：与后代组件双向同步</h3><p>@Provide和@Consume，应用于与后代组件的双向数据同步，应用于状态数据在多个层级之间传递的场景。不同于上文提到的父子组件之间通过命名参数机制传递，@Provide和@Consume摆脱参数传递机制的束缚，&#x3D;&#x3D;实现跨层级传递。&#x3D;&#x3D;</p>
<p>其中@Provide装饰的变量是在祖先节点中，可以理解为被“提供”给后代的状态变量。@Consume装饰的变量是在后代组件中，去“消费（绑定）”祖先节点提供的变量。</p>
<p>@Provide&#x2F;@Consume装饰的状态变量有以下特性：</p>
<ul>
<li>@Provide装饰的状态变量自动对其所有后代组件可用，即该变量被“provide”给他的后代组件。由此可见，@Provide的方便之处在于，开发者不需要多次在组件之间传递变量。</li>
<li>后代通过使用@Consume去获取@Provide提供的变量，建立在@Provide和@Consume之间的双向数据同步，与@State&#x2F;@Link不同的是，前者可以在多层级的父子组件之间传递。</li>
<li>@Provide和@Consume可以通过&#x3D;&#x3D;相同的变量名&#x3D;&#x3D;或者&#x3D;&#x3D;相同的变量别名&#x3D;&#x3D;绑定，变量类型必须相同。</li>
</ul>
<p>@Provide和@Consume通过相同的变量名或者相同的变量别名绑定时，@Provide修饰的变量和@Consume修饰的变量是一对多的关系。不允许在同一个自定义组件内，包括其子组件中声明<strong>多个同名或者同别名的</strong>@Provide装饰的变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">ProvideConsume</span> &#123;</span><br><span class="line">  @<span class="title class_">Provide</span>(<span class="string">&#x27;theshy&#x27;</span>) <span class="attr">wechat</span>: string = <span class="string">&#x27;微信公众号&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">wechat</span>).<span class="title class_">ProvideConsume</span>_textStyle()</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">wechat</span> = <span class="string">&#x27;不多讲故事&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Divider</span>()</span><br><span class="line">        <span class="comment">// 父调用子。</span></span><br><span class="line">        <span class="title class_">ProvideConsume</span>_son()</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">ProvideConsume</span>_son &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;子组件的布局内容:&#x27;</span>).<span class="title class_">ProvideConsume</span>_textStyle()</span><br><span class="line">      <span class="title class_">Divider</span>()</span><br><span class="line">      <span class="comment">// 调用孙组件</span></span><br><span class="line">      <span class="title class_">ProvideConsume</span>_sun()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">ProvideConsume</span>_sun &#123;</span><br><span class="line">  @<span class="title class_">Consume</span>(<span class="string">&#x27;theshy&#x27;</span>) <span class="attr">study</span>: string</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;孙:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">study</span>).<span class="title class_">ProvideConsume</span>_textStyle()</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">study</span> = <span class="string">&#x27;HarmonyOS4.0&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Extend</span>(<span class="title class_">Text</span>) <span class="keyword">function</span> <span class="title function_">ProvideConsume_textStyle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">  .<span class="title function_">fontWeight</span>(<span class="number">700</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Watch装饰器：状态变量更改通知"><a href="#Watch装饰器：状态变量更改通知" class="headerlink" title="@Watch装饰器：状态变量更改通知"></a>@Watch装饰器：状态变量更改通知</h3><p>@Watch应用于对状态变量的监听。如果开发者需要关注某个状态变量的值是否改变，可以使用@Watch为状态变量设置回调函数。</p>
<p>@Watch用于监听状态变量的变化，当状态变量变化时，@Watch的回调方法将被调用。@Watch在ArkUI框架内部判断数值有无更新使用的是严格相等（&#x3D;&#x3D;&#x3D;），遵循严格相等规范。当在严格相等为false的情况下，就会触发@Watch的回调。</p>
<h4 id="装饰器说明"><a href="#装饰器说明" class="headerlink" title="装饰器说明"></a>装饰器说明</h4><table>
<thead>
<tr>
<th><strong>@Watch补充变量装饰器</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>装饰器参数</td>
<td>必填。常量字符串，字符串需要有引号。是(string) &#x3D;&gt; void自定义成员函数的方法的引用。</td>
</tr>
<tr>
<td>可装饰的自定义组件变量</td>
<td>可监听所有装饰器装饰的状态变量。不允许监听常规变量。</td>
</tr>
<tr>
<td>装饰器的顺序</td>
<td>建议@State、@Prop、@Link等装饰器在@Watch装饰器之前。</td>
</tr>
</tbody></table>
<h3 id="语法说明"><a href="#语法说明" class="headerlink" title="语法说明"></a>语法说明</h3><table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>(changedPropertyName? : string) &#x3D;&gt; void</td>
<td>该函数是自定义组件的成员函数，changedPropertyName是被watch的属性名。在多个状态变量绑定同一个@Watch的回调方法的时候，可以通过changedPropertyName进行不同的逻辑处理将属性名作为字符串输入参数，不返回任何内容。</td>
</tr>
</tbody></table>
<h3 id="观察变化和行为表现"><a href="#观察变化和行为表现" class="headerlink" title="观察变化和行为表现"></a>观察变化和行为表现</h3><ol>
<li>当观察到状态变量的变化（包括双向绑定的AppStorage和LocalStorage中对应的key发生的变化）的时候，对应的@Watch的回调方法将被触发；</li>
<li>@Watch方法在自定义组件的属性变更之后同步执行；</li>
<li><font color="red">如果在@Watch的方法里改变了其他的状态变量，也会引起状态变更和@Watch的执行；</font></li>
<li><font color="red">在第一次初始化的时候，@Watch装饰的方法不会被调用，即认为初始化不是状态变量的改变。</font>只有在后续状态改变时，才会调用@Watch回调方法。</li>
</ol>
<h3 id="限制条件"><a href="#限制条件" class="headerlink" title="限制条件"></a>限制条件</h3><ul>
<li>建议开发者避免无限循环。循环可能是因为在@Watch的回调方法里直接或者间接地修改了同一个状态变量引起的。为了避免循环的产生，建议<font color="red">不要在@Watch的回调方法里修改当前装饰的状态变量；</font></li>
<li>开发者应关注性能，属性值更新函数会延迟组件的重新渲染（具体请见上面的行为表现），因此，回调函数应仅执行快速运算；</li>
<li><font color="red">不建议在@Watch函数中调用async await，因为@Watch设计的用途是为了快速的计算，异步行为可能会导致重新渲染速度的性能问题。</font></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Watch 修饰  状态数据</span></span><br><span class="line"><span class="comment"> *  函数中，不要不要不要修改被监视的状态变量。 我们要操作的是其他的业务逻辑</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">WatchDct</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> @<span class="title class_">Watch</span>(<span class="string">&#x27;change&#x27;</span>) <span class="attr">count</span>: number = <span class="number">1</span></span><br><span class="line">  @<span class="title class_">State</span> @<span class="title class_">Watch</span>(<span class="string">&#x27;change&#x27;</span>) <span class="attr">pow</span>: number = <span class="number">2</span></span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">res</span>: number = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">change</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// this.count = this.count + 2  无限循环</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">res</span> = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="variable language_">this</span>.<span class="property">count</span>, <span class="variable language_">this</span>.<span class="property">pow</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;基数：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">count</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Divider</span>()</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`次幂：<span class="subst">$&#123;<span class="variable language_">this</span>.pow&#125;</span>`</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pow</span>++</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Divider</span>()</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;结果：&quot;</span> + <span class="variable language_">this</span>.<span class="property">res</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="渲染控制"><a href="#渲染控制" class="headerlink" title="渲染控制"></a>渲染控制</h2><h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><ul>
<li>支持if、else和else if语句。</li>
<li>if、else if后跟随的条件语句可以使用状态变量。</li>
<li>允许在容器组件内使用，通过条件渲染语句构建不同的子组件。</li>
<li>当if、else if后跟随的状态判断中使用的状态变量值变化时，条件渲染语句会进行更新</li>
<li>条件可以包括Typescript表达式。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">  组件内容<span class="number">1</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  组件内容<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例</p>
<blockquote>
<p>可选参数的写法</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 分支渲染</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">Branch</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">isStudy</span>: boolean = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;toggle&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">50</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isStudy</span> = !<span class="variable language_">this</span>.<span class="property">isStudy</span></span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isStudy</span>) &#123;</span><br><span class="line">          <span class="title class_">Branch</span>_Comp(&#123; <span class="attr">content</span>: <span class="string">&#x27;学习鸿蒙之前&#x27;</span>, <span class="attr">src</span>: $r(<span class="string">&quot;app.media.beforeDixin&quot;</span>) &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title class_">Branch</span>_Comp(&#123; <span class="attr">content</span>: <span class="string">&#x27;学习鸿蒙之后&#x27;</span>, <span class="attr">src</span>: $r(<span class="string">&quot;app.media.afterDixin&quot;</span>) &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">Branch</span>_Comp &#123;</span><br><span class="line">  <span class="attr">content</span>: string</span><br><span class="line">  <span class="attr">src</span>: <span class="title class_">Resource</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">content</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">30</span> &#125;)</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">src</span>)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Auto</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ForEach：循环渲染"><a href="#ForEach：循环渲染" class="headerlink" title="ForEach：循环渲染"></a>ForEach：循环渲染</h3><p>ForEach接口基于数组类型数据来进行循环渲染，需要与容器组件配合使用，且接口返回的组件应当是允许包含在ForEach父容器组件中的子组件。</p>
<h4 id="接口描述"><a href="#接口描述" class="headerlink" title="接口描述"></a>接口描述</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ForEach</span>(</span><br><span class="line">  <span class="attr">arr</span>: <span class="title class_">Array</span>,</span><br><span class="line">  <span class="attr">itemGenerator</span>: <span class="function">(<span class="params">item: <span class="built_in">Array</span>, index?: number</span>) =&gt;</span> <span class="keyword">void</span>,</span><br><span class="line">  keyGenerator?: (<span class="attr">item</span>: <span class="title class_">Array</span>, index?: number): <span class="function"><span class="params">string</span> =&gt;</span> string</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>参数名</strong></th>
<th><strong>参数类型</strong></th>
<th><strong>必填</strong></th>
<th><strong>参数描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>arr</td>
<td>Array</td>
<td>是</td>
<td>数据源，为Array类型的数组。<br><strong>说明</strong>：<br>- 可以设置为空数组，此时不会创建子组件。<br>- 可以设置返回值为数组类型的函数，例如arr.slice(1, 3)，但设置的函数不应改变包括数组本身在内的任何状态变量，例如不应使用Array.splice(),Array.sort()或Array.reverse()这些会改变原数组的函数。</td>
</tr>
<tr>
<td>itemGenerator</td>
<td>(item: any, index?: number) &#x3D;&gt; void</td>
<td>是</td>
<td>组件生成函数。<br>- 为数组中的每个元素创建对应的组件。<br>- item参数：arr数组中的数据项。<br>- index参数（可选）：arr数组中的数据项索引。<br><strong>说明</strong>：<br>- 组件的类型必须是ForEach的父容器所允许的。例如，ListItem组件要求ForEach的父容器组件必须为List组件。</td>
</tr>
<tr>
<td>keyGenerator</td>
<td>(item: any, index?: number) &#x3D;&gt; string</td>
<td>否</td>
<td>键值生成函数。<br>- 为数据源arr的每个数组项生成唯一且持久的键值。函数返回值为开发者自定义的键值生成规则。<br>- item参数：arr数组中的数据项。<br>- index参数（可选）：arr数组中的数据项索引。<br><strong>说明</strong>：<br>- 如果函数缺省，框架默认的键值生成函数为<br><code> (item: T, index: number) =&gt; &#123; return index + &#39;__&#39; + JSON.stringify(index); &#125;</code><br>- 键值生成函数不应改变任何组件状态。</td>
</tr>
</tbody></table>
<p><font color="red"><strong>键值生成函数。返回值要确保唯一！！！很重要。</strong></font></p>
<blockquote>
<p>如果不唯一，则相同的组件不会渲染出来</p>
</blockquote>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h3><blockquote>
<p>src&#x2F;main&#x2F;ets&#x2F;entryability&#x2F;EntryAbility.ts 在这个页面中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create状态，在UIAbility实例创建时触发，系统会调用onCreate回调。可以在onCreate回调中进行相关初始化操作。</span></span><br><span class="line"><span class="title function_">onCreate</span>(<span class="params">want, launchParam</span>) &#123;</span><br><span class="line">  <span class="comment">//例如用户打开电池管理应用，在应用加载过程中，在UI页面可见之前，可以在onCreate回调中读取当前系统的电量情况，用于后续的UI页面展示。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以在onWindowStageCreate回调中，设置UI页面加载、设置WindowStage的事件订阅。</span></span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="params">windowStage: <span class="variable language_">window</span>.WindowStage</span>) &#123;</span><br><span class="line">  <span class="comment">// 在onWindowStageCreate(windowStage)中通过loadContent接口设置应用要加载的页面</span></span><br><span class="line">  windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// onBackground回调，在UIAbility的UI页面完全不可见之后，即UIAbility切换至后台时候触发。</span></span><br><span class="line"><span class="comment">// 可以在onBackground回调中释放UI页面不可见时无用的资源，或者在此回调中执行较为耗时的操作，例如状态保存等。</span></span><br><span class="line"><span class="title function_">onBackground</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 当地图应用切换到后台状态，可以在onBackground回调中停止定位功能，以节省系统的资源消耗。</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// onForeground回调，在UIAbility的UI页面可见之前，即UIAbility切换至前台时触发。</span></span><br><span class="line"><span class="comment">// 可以在onForeground回调中申请系统需要的资源，或者重新申请在onBackground中释放的资源。</span></span><br><span class="line"><span class="title function_">onForeground</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在UIAbility实例销毁之前，则会先进入onWindowStageDestroy回调，我们可以在该回调中释放UI页面资源。</span></span><br><span class="line"><span class="title function_">onWindowStageDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在UIAbility销毁时触发。可以在onDestroy回调中进行系统资源的释放、数据的保存等操作。</span></span><br><span class="line"><span class="title function_">onDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="页面和自定义组件生命周期"><a href="#页面和自定义组件生命周期" class="headerlink" title="页面和自定义组件生命周期"></a>页面和自定义组件生命周期</h3><p>页面生命周期，即被@Entry装饰的组件生命周期，提供以下生命周期接口：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/arkts-custom-component-lifecycle-0000001482395076-V3#ZH-CN_TOPIC_0000001523488850__onpageshow">onPageShow</a>：页面每次显示时触发。</li>
<li><a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/arkts-custom-component-lifecycle-0000001482395076-V3#ZH-CN_TOPIC_0000001523488850__onpagehide">onPageHide</a>：页面每次隐藏时触发一次。</li>
<li><a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/arkts-custom-component-lifecycle-0000001482395076-V3#ZH-CN_TOPIC_0000001523488850__onbackpress">onBackPress</a>：当用户点击返回按钮时触发。<font color="red">（是手机下方的返回按钮，不是页面的路由返回）</font></li>
</ul>
<p>组件生命周期，即一般用@Component装饰的自定义组件的生命周期，提供以下生命周期接口：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/arkts-custom-component-lifecycle-0000001482395076-V3#ZH-CN_TOPIC_0000001523488850__abouttoappear">aboutToAppear</a>：组件即将出现时回调该接口，具体时机为在创建自定义组件的新实例后，在执行其build()函数之前执行。</li>
<li><a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/arkts-custom-component-lifecycle-0000001482395076-V3#ZH-CN_TOPIC_0000001523488850__abouttodisappear">aboutToDisappear</a>：在自定义组件即将析构销毁时执行。</li>
</ul>
<h3 id="数据传递"><a href="#数据传递" class="headerlink" title="数据传递"></a>数据传递</h3><ul>
<li>页面跳转，使用路由传递。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pages/LifeCycle1</span></span><br><span class="line">router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;pages/LifeCycle2&#x27;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    name : <span class="string">&#x27;HarmonyOS4.0&#x27;</span>,</span><br><span class="line">    age : <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//pages/LifeCycle2</span></span><br><span class="line"><span class="keyword">let</span> name = router.<span class="title function_">getParams</span>()[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>应用间数据数据共享：<font color="red"><strong>预览器不行</strong></font></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 应用下 ets/entryability/Enterability.ts</span></span><br><span class="line"><span class="title class_">AppStorage</span>.<span class="title class_">SetOrCreate</span>(<span class="string">&#x27;appName&#x27;</span>,<span class="string">&#x27;诗词学习&#x27;</span>)</span><br><span class="line"><span class="comment">// 应用下某个需要用到的页面</span></span><br><span class="line"><span class="keyword">let</span> appName =  <span class="title class_">AppStorage</span>.<span class="title class_">Get</span>(<span class="string">&#x27;appName&#x27;</span>) <span class="keyword">as</span> string</span><br></pre></td></tr></table></figure>

<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><h3 id="组件通用信息"><a href="#组件通用信息" class="headerlink" title="组件通用信息"></a>组件通用信息</h3><h4 id="通用事件"><a href="#通用事件" class="headerlink" title="通用事件"></a>通用事件</h4><ul>
<li>点击事件</li>
</ul>
<p>组件被点击时触发的事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击动作触发该回调</span></span><br><span class="line"><span class="title function_">onClick</span>(<span class="attr">event</span>: <span class="function">(<span class="params">event?: ClickEvent</span>) =&gt;</span> <span class="keyword">void</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>触摸事件</li>
</ul>
<p>当手指在组件上按下、滑动、抬起时触发。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手指触摸动作触发该回调</span></span><br><span class="line"><span class="title function_">onTouch</span>(<span class="attr">event</span>: <span class="function">(<span class="params">event?: TouchEvent</span>) =&gt;</span> <span class="keyword">void</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>按键事件</li>
</ul>
<p>按键事件指组件与键盘、遥控器等按键设备交互时触发的事件（仅适用于所有可获焦组件，例如 Button）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定该方法的组件获焦后，按键动作触发该回调</span></span><br><span class="line"><span class="title function_">onKeyEvent</span>(<span class="attr">event</span>: <span class="function">(<span class="params">event?: KeyEvent</span>) =&gt;</span> <span class="keyword">void</span>)</span><br></pre></td></tr></table></figure>

<h4 id="通用属性"><a href="#通用属性" class="headerlink" title="通用属性"></a>通用属性</h4><ul>
<li>尺寸设置</li>
</ul>
<p>用于设置组件的宽高、边距。</p>
<p><code>margin  padding  border</code></p>
<ul>
<li>位置设置</li>
</ul>
<p>设置组件的对齐方式、布局方向和显示位置。</p>
<p>align: 设置元素内容在元素绘制区域内的对齐方式。</p>
<p>direction: 设置元素水平方向的布局。</p>
<p>position：设置子组件左上角相对于父组件左上角的偏移位置</p>
<p>markAnchor：相对于起点偏移，其中x为最终定位点距离起点水平方向间距，x&gt;0往左，反之向右。y为最终定位点距离起点垂直方向间距，y&gt;0向上，反之向下（要写在<code>Stack</code>里）</p>
<p>offset：相对定位，x&gt;0向右偏移，反之向左，y&gt;0向下偏移，反之向上</p>
<img src="http://clx-dev.oss-cn-beijing.aliyuncs.com/msl/common/test/png/20240113/pdRGehSW4EHtvEs4.png" style="zoom:50%;">

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">PositionExample</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="comment">// 元素内容&lt;元素宽高，设置内容在元素内的对齐方式</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;align:&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">26</span>).<span class="title function_">fontColor</span>(<span class="number">0x3E3E3E</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      <span class="title class_">Stack</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;First&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;65%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Second&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>).<span class="title function_">opacity</span>(<span class="number">0.9</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="number">0xFFE4C4</span>)</span><br><span class="line">      .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">TopStart</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 父容器设置direction为Direction.Ltr，子元素从左到右排列</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;direction&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">26</span>).<span class="title function_">fontColor</span>(<span class="number">0x3E3E3E</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xF5DEB3</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;4&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xD2B48C</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">direction</span>(<span class="title class_">Direction</span>.<span class="property">Ltr</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 设置子组件左上角相对于父组件左上角的偏移位置</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;position&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">26</span>).<span class="title function_">fontColor</span>(<span class="number">0x3E3E3E</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;30%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xdeb887</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;2 position(30, 10)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;60%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;30&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xbbb2cb</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="number">30</span>, <span class="attr">y</span>: <span class="number">10</span> &#125;)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;45%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xdeb887</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;4 position(50%, 70%)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;50%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xbbb2cb</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">position</span>(&#123; <span class="attr">x</span>: <span class="string">&#x27;50%&#x27;</span>, <span class="attr">y</span>: <span class="string">&#x27;70%&#x27;</span> &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dashed</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 相对于起点偏移，其中x为最终定位点距离起点水平方向间距，x&gt;0往左，反之向右。</span></span><br><span class="line">      <span class="comment">// y为最终定位点距离起点垂直方向间距，y&gt;0向上，反之向下</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;markAnchor&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">26</span>).<span class="title function_">fontColor</span>(<span class="number">0x3E3E3E</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">TopStart</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Row</span>()</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;100&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xdeb887</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">25</span>, <span class="attr">height</span>: <span class="number">25</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">          .<span class="title function_">markAnchor</span>(&#123; <span class="attr">x</span>: <span class="number">25</span>, <span class="attr">y</span>: <span class="number">25</span> &#125;)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">25</span>, <span class="attr">height</span>: <span class="number">25</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">          .<span class="title function_">markAnchor</span>(&#123; <span class="attr">x</span>: -<span class="number">100</span>, <span class="attr">y</span>: -<span class="number">25</span> &#125;)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">25</span>, <span class="attr">height</span>: <span class="number">25</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">          .<span class="title function_">markAnchor</span>(&#123; <span class="attr">x</span>: <span class="number">25</span>, <span class="attr">y</span>: -<span class="number">25</span> &#125;)</span><br><span class="line">      &#125;.<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">25</span> &#125;).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dashed</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 相对定位，x&gt;0向右偏移，反之向左，y&gt;0向下偏移，反之向上</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;offset&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">26</span>).<span class="title function_">fontColor</span>(<span class="number">0x3E3E3E</span>).<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;15%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xdeb887</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;2  offset(15, 30)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">120</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xbbb2cb</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">align</span>(<span class="title class_">Alignment</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: <span class="number">15</span>, <span class="attr">y</span>: <span class="number">30</span> &#125;)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;15%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;).<span class="title function_">backgroundColor</span>(<span class="number">0xdeb887</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;4 offset(-10%, 20%)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">100</span>, <span class="attr">height</span>: <span class="string">&#x27;50&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="number">0xbbb2cb</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">          .<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: <span class="string">&#x27;-5%&#x27;</span>, <span class="attr">y</span>: <span class="string">&#x27;20%&#x27;</span> &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dashed</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="基础组件"><a href="#基础组件" class="headerlink" title="基础组件"></a>基础组件</h3><ul>
<li>按钮组件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1： stateEffect：按下是否有动画</span></span><br><span class="line"><span class="title class_">Button</span>(options?: &#123;type?: <span class="title class_">ButtonType</span>, stateEffect?: boolean&#125;)</span><br><span class="line"><span class="comment">// 方法2： </span></span><br><span class="line"><span class="title class_">Button</span>(label?: <span class="title class_">ResourceStr</span>, options?: &#123; type?: <span class="title class_">ButtonType</span>, stateEffect?: boolean &#125;)</span><br></pre></td></tr></table></figure>

<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：</span></span><br><span class="line"><span class="title class_">Button</span>(<span class="string">&#x27;OK&#x27;</span>, &#123; <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Normal</span>, <span class="attr">stateEffect</span>: <span class="literal">true</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：</span></span><br><span class="line"><span class="title class_">Button</span>(&#123; <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Capsule</span> &#125;) &#123;</span><br><span class="line">  <span class="title class_">Row</span>() &#123;</span><br><span class="line">    <span class="title class_">LoadingProgress</span>()</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">20</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">20</span>)</span><br><span class="line">      .<span class="title function_">color</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;储锐&#x27;</span>)</span><br><span class="line">      .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123;<span class="attr">left</span>:<span class="number">10</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;.<span class="title function_">width</span>(<span class="number">150</span>).<span class="title function_">height</span>(<span class="number">50</span>)</span><br></pre></td></tr></table></figure>



<ul>
<li>checkbox</li>
</ul>
<p>提供多选框组件，通常用于某选项的打开或关闭。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Checkbox</span>(options?: &#123;name?: string, group?: string &#125;)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/ts-basic-components-checkbox-0000001427744808-V3">官网</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://old-gang.github.io">Mr.储</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://old-gang.github.io/post/45acc878.html">https://old-gang.github.io/post/45acc878.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://old-gang.github.io" target="_blank">Mr.储</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8A%A0%E6%B2%B9%E7%AB%99/">加油站</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/ecb518fe.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">node相关</div></div></a></div><div class="next-post pull-right"><a href="/post/e39e2a4e.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Python学习</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Mr.储</div><div class="author-info__description">Fake it, until u make it~</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/old-gang"><i class="fab fa-github"></i><span>点个关注呗</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/old-gang" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><p align="center"><img src="https://chu-image-host.oss-cn-beijing.aliyuncs.com/typora/f7384c88956d4378b72e47548e19c9f8.gif" width="50" alt="gou"></p> <p align="center">微信号：cr1710518304</p> <p align="center">QQ号：1710518304</p></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%82%82%E9%80%85%E9%B8%BF%E8%92%99"><span class="toc-number">1.</span> <span class="toc-text">邂逅鸿蒙</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">1.1.</span> <span class="toc-text">1、自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.1.</span> <span class="toc-text">自定义组件的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#build-%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.2.</span> <span class="toc-text">build()函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Builder%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%9E%84%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">@Builder装饰器：自定义组件构建函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E5%86%85%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%84%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">自定义组件内自定义构建函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%84%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">全局自定义构建函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Styles%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%9A%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E9%87%8D%E7%94%A8%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">@Styles装饰器：定义组件重用样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">装饰器使用说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Extend%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%9A%E5%AE%9A%E4%B9%89%E6%89%A9%E5%B1%95%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">@Extend装饰器：定义扩展组件样式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">1.4.2.</span> <span class="toc-text">使用规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#stateStyles%EF%BC%9A%E5%A4%9A%E6%80%81%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">stateStyles：多态样式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.5.1.</span> <span class="toc-text">概述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.6.</span> <span class="toc-text">状态管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State%E2%80%94%E2%80%93-gt-Prop-%E5%92%8C-State-lt-%E2%80%94%E2%80%93-gt-Link"><span class="toc-number">1.6.1.</span> <span class="toc-text">@State—–&gt;@Prop 和 @State  &lt;—–&gt; @Link</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Provide%E8%A3%85%E9%A5%B0%E5%99%A8%E5%92%8C-Consume%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%9A%E4%B8%8E%E5%90%8E%E4%BB%A3%E7%BB%84%E4%BB%B6%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5"><span class="toc-number">1.6.2.</span> <span class="toc-text">@Provide装饰器和@Consume装饰器：与后代组件双向同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Watch%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%9A%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F%E6%9B%B4%E6%94%B9%E9%80%9A%E7%9F%A5"><span class="toc-number">1.6.3.</span> <span class="toc-text">@Watch装饰器：状态变量更改通知</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E8%AF%B4%E6%98%8E"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">装饰器说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E8%AF%B4%E6%98%8E"><span class="toc-number">1.6.4.</span> <span class="toc-text">语法说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E5%8F%98%E5%8C%96%E5%92%8C%E8%A1%8C%E4%B8%BA%E8%A1%A8%E7%8E%B0"><span class="toc-number">1.6.5.</span> <span class="toc-text">观察变化和行为表现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.6.6.</span> <span class="toc-text">限制条件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E6%8E%A7%E5%88%B6"><span class="toc-number">1.7.</span> <span class="toc-text">渲染控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">1.7.1.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ForEach%EF%BC%9A%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93"><span class="toc-number">1.7.2.</span> <span class="toc-text">ForEach：循环渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">接口描述</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.</span> <span class="toc-text">生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.1.</span> <span class="toc-text">应用生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.2.</span> <span class="toc-text">页面和自定义组件生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="toc-number">1.8.3.</span> <span class="toc-text">数据传递</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E7%94%A8%E4%BF%A1%E6%81%AF"><span class="toc-number">1.9.1.</span> <span class="toc-text">组件通用信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">通用事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="toc-number">1.9.1.2.</span> <span class="toc-text">通用属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6"><span class="toc-number">1.9.2.</span> <span class="toc-text">基础组件</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Mr.储</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-api-ten-lac.vercel.app',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-api-ten-lac.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>